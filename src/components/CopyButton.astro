---
import Button from "./Button.astro";
type Props = {
  content: string;
};

const { content } = Astro.props;
---

<Button id="copy-btn" data-copy={content}>
  <slot />
</Button>

<script>
  const btn = document.getElementById("copy-btn");

  async function copyText() {
    try {
      await navigator.clipboard.writeText(btn?.dataset.copy!);
      console.log("Copied to clipboard");
    } catch (err) {
      console.error("Failed to copy: ", err);
    }
  }

  btn?.addEventListener("click", copyText);
</script>
